<script>
var graph = new Graph();

var node<%= current_user.id %> = graph.newNode({label: '<%= current_user.name.split(' ')[0]  %>'});
<% (current_user.following.take(5) | current_user.followers.take(5)).each do |person| %>
var node<%= person.id %> = graph.newNode({label: '<%= person.name.split(' ')[0] %>'});
<% end %>

<% current_user.following.take(5).each do |following| %>
graph.newEdge(node<%= current_user.id %>, node<%= following.id %>, {color: '#00A0B0'});
<% end %>
<% current_user.followers.take(5).each_with_index do |follower, index| %>
graph.newEdge(node<%= follower.id %>, node<%= current_user.id %>, {color: '#80A0B0'});
<% end %>

jQuery(function(){
	var springy = jQuery('#springydemo').springy({
		graph: graph
	});
});
</script>

<canvas id="springydemo" width="640" height="480" />